---
title: 大厂为啥不用“外键”？！
tags: 猿月亮
excerpt: 。。。
---

![](https://moonxw.github.io/blog/assets/imgs/20240229/image-20240316171852304.png)

> 哈喽，我是了不起，一个奔3的程序员~
> 每周定时更新一些程序员相关技术和文章，欢迎读者小伙伴们积极留言探讨呀~


### 啥是外键

外键（Foreign Key）是数据库中用于建立表与表之间关系的一种约束。

它定义了一个字段或一组字段，该字段的值必须与另一个表中的主键或唯一键的值相匹配。

外键的作用是维护表与表之间的关联性和一致性。

通过定义外键关系，可以实现数据的引用完整性，确保在关联表中的数据一致、有效和可靠。

在关系型数据库中，外键通常由一个表中的字段引用另一个表中的主键或唯一键。被引用的表被称为父表（或主表），引用它的表被称为子表（或从表）。

外键关系可以是一对一、一对多或多对多的关系。

### 用外键有啥好处？？

**保证数据完整性**

外键可以确保数据的引用完整性，保证数据的一致性和有效性。

外键强制要求子表中的外键值必须与父表中的主键或唯一键值相匹配，防止了无效或不一致的数据插入和更新。

**保证数据之间的关联性**

外键建立了表与表之间的关联关系，使得数据之间的关系更加明确和可见。通过外键，可以轻松地执行跨表查询，访问和操作相关的数据。

**保证数据一致性**

使用外键可以确保关联表中的数据保持一致。当更新或删除父表中的数据时，可以通过级联操作或触发器自动更新或删除子表中相关的数据，保持数据的一致性。

### 为啥现在不推荐用外键？

既然外键有这么多好处，那为啥都不推荐用外键了？因为，这玩意儿也有坑的地方，简单总结起来就俩字：难用。

**数据操作更复杂**

外键的使用增加了数据操作的复杂性。

在进行数据插入、更新和删除操作时，必须遵守外键约束，确保数据的一致性。需要浪费更多的精力，特别是在涉及多个表的复杂操作时。

当然，还有更常见的情况是，删数据删不掉呀。。得根据关联关系，一张表一张表地删，直接崩溃。。。

**锁和并发性问题**

在并发环境中，当多个事务同时修改涉及外键的数据时，可能出现死锁或性能下降的情况，灵活性和性能优化挑战变大。

同时，使用外键可能会带来一定的数据库性能开销。在进行数据插入、更新和删除操作时，数据库需要检查和维护外键关系的完整性，这会导致额外的开销和性能下降。

特别是在处理大量数据和复杂关系的情况下，性能影响会更加显著。











